import{_ as a,c as s,o as i,ae as t}from"./chunks/framework.Dq7KSw7C.js";const u=JSON.parse('{"title":"How to create an end-user hApp","description":"","frontmatter":{},"headers":[],"relativePath":"documentation/how-to-create-an-end-user-happ.md","filePath":"documentation/how-to-create-an-end-user-happ.md"}'),n={name:"documentation/how-to-create-an-end-user-happ.md"};function o(l,e,p,h,r,d){return i(),s("div",null,e[0]||(e[0]=[t(`<h1 id="how-to-create-an-end-user-happ" tabindex="-1">How to create an end-user hApp <a class="header-anchor" href="#how-to-create-an-end-user-happ" aria-label="Permalink to &quot;How to create an end-user hApp&quot;">​</a></h1><p>This guide describes how to create a hApp that can be directly installed and executed by the end users, for <strong>both desktop and mobile platforms</strong>.</p><h2 id="motivation" tabindex="-1">Motivation <a class="header-anchor" href="#motivation" aria-label="Permalink to &quot;Motivation&quot;">​</a></h2><p>The <a href="https://github.com/holochain/scaffolding" target="_blank" rel="noreferrer">scaffolding tool</a> is a great way to create and package holochain applications. However, its built-in templates don&#39;t produce an end-user installable application. They produce a <code>.webhapp</code> file that needs to be installed in a holochain runtime, which is the actual app that is being executed in the OS of the end-user (eg. the <a href="https://github.com/holochain/launcher" target="_blank" rel="noreferrer">launcher</a>).</p><p>We need a way to create end-users applications for mobile platforms to create simple experiences similar to what users are used to in the existing app stores.</p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>This is also what <a href="https://github.com/holochain-apps/holochain-kangaroo" target="_blank" rel="noreferrer">kangaroo</a> accomplishes. However, the approach that kangaroo takes is to serve as a template for you to clone it. The approach for p2p Shipyard&#39;s <code>tauri-plugin-holochain</code> is just to be another Tauri plugin, which means that apps will get bug fixes and new features automatically when upgrading to a new version of the plugin.</p></div><h2 id="scaffolding-the-end-user-app" tabindex="-1">Scaffolding the end-user app <a class="header-anchor" href="#scaffolding-the-end-user-app" aria-label="Permalink to &quot;Scaffolding the end-user app&quot;">​</a></h2><div class="warning custom-block github-alert"><p class="custom-block-title">WARNING</p><p>p2p Shipyard relies heavily on <a href="https://nixos.org/" target="_blank" rel="noreferrer"><code>nix</code></a> to achieve reproducible environments. Unfortunately, <code>nix</code> does not support Windows. So if you have a Windows OS, you will need to <a href="https://learn.microsoft.com/en-us/windows/wsl/install" target="_blank" rel="noreferrer">install Windows Subsystem Linux</a> and run all the steps in this guide inside of its environment.</p></div><ol start="0"><li>If you haven&#39;t already, <a href="https://nixos.org/download/#nix-install-linux" target="_blank" rel="noreferrer">install the nix package manager</a> with:</li></ol><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-UG2-j" id="tab-umcI85a" checked><label data-title="Linux" for="tab-umcI85a">Linux</label><input type="radio" name="group-UG2-j" id="tab-3Lsguhp"><label data-title="MacOs" for="tab-3Lsguhp">MacOs</label></div><div class="blocks"><div class="language-bash vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://nixos.org/nix/install)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --daemon</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://nixos.org/nix/install)</span></span></code></pre></div></div></div><p>And follow along its instructions and prompts.</p><ol><li>Add the appropriate nix caches to your environment:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nixpkgs#cachix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> holochain-ci</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nixpkgs#cachix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> darksoil-studio</span></span></code></pre></div><ol start="2"><li><a href="https://developer.holochain.org/get-started/3-forum-app-tutorial/" target="_blank" rel="noreferrer">Scaffold your hApp using the scaffolding tool</a>.</li></ol><p>After it completes, make sure you execute its lasts steps:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> develop</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>If you already have a hApp that you want to convert to a tauri end-user app, you can skip this step.</p></div><ol start="3"><li>Run this command inside the repository of your web-hApp:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github:darksoil-studio/p2p-shipyard#scaffold-tauri-happ</span></span></code></pre></div><p>And follow along to answer all the necessary prompts.</p><p>This will execute all the required steps to convert your previously scaffolded hApp to an end-user Tauri app.</p><ol start="4"><li>Take a look into the files that the scaffold command edited, and adapt them if necessary:</li></ol><ul><li><code>flake.nix</code>: added the <code>p2p-shipyard</code> input and its <code>devShells</code>.</li><li><code>package.json</code>: added set up scripts and some <code>devDependencies</code>.</li><li><code>ui/vite.config.ts</code>: set the server configuration necessary for Tauri.</li><li><code>src-tauri</code>: here is where the code for the backend of the tauri app lives. <ul><li>For now it&#39;s a simple Tauri app that includes the <code>tauri-plugin-holochain</code>, and installs your app when it&#39;s first launched.</li><li>The tauri app will just use the UI that the scaffolding tool produced as its own UI.</li></ul></li></ul><div class="warning custom-block github-alert"><p class="custom-block-title">WARNING</p><p>The <code>scaffold-tauri-happ</code> command assumes that you have scaffolded your app using the scaffolding tool.</p><p>It also tries to make smart guesses about the structure of your project, but it can be tricky to support every repository structure. Please open an issue in the github repository if you find any bugs in it!</p></div><p>That&#39;s it! We now have an end-user, cross-platform hApp.</p><div class="warning custom-block github-alert"><p class="custom-block-title">WARNING</p><p>The scaffolded tauri app is missing icons, which are needed for the app to compile. Run through the rest of this guide and the following one (<a href="./getting-to-know-tauri.html">Getting to know Tauri</a>) to be able to generate the icons for your Tauri app.</p></div><h2 id="development-environment" tabindex="-1">Development Environment <a class="header-anchor" href="#development-environment" aria-label="Permalink to &quot;Development Environment&quot;">​</a></h2><p>The <code>scaffold-tauri-happ</code> has added the necessary nix <code>devShells</code> to your <code>flake.nix</code> file so that you don&#39;t need to follow install anything to get the tauri or Android development environment.</p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>Nix <code>devShells</code> are packages that describe development environments, with all their dependencies and environment variables, so that the developer does not need to configure manually their setup.</p></div><p>As usual, run this command to enter the development environment:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> develop</span></span></code></pre></div><p>This can take a while while it builds all the required dependencies.</p><p>Next, run these commands:</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-DvRXq" id="tab-SXBVNrU" checked><label data-title="npm" for="tab-SXBVNrU">npm</label><input type="radio" name="group-DvRXq" id="tab-IDaGDDi"><label data-title="yarn" for="tab-IDaGDDi">yarn</label><input type="radio" name="group-DvRXq" id="tab-zogebpO"><label data-title="pnpm" for="tab-zogebpO">pnpm</label></div><div class="blocks"><div class="language-bash vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div></div></div><p>This will start two agents connected to each other.</p><p>Under the hood, these commands are running tauri CLI commands. As such, we should get to know Tauri a bit better to be comfortable while developing the app. Go to <a href="./getting-to-know-tauri.html">Getting to know Tauri</a> to familiarize yourself with it.</p>`,36)]))}const k=a(n,[["render",o]]);export{u as __pageData,k as default};
